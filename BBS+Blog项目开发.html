<!DOCTYPE html>
<!-- saved from url=(0047)https://www.cnblogs.com/huang-yc/p/9630644.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="origin">
<title>BBS+Blog项目开发 - Huang_Yc - 博客园</title>
<meta property="og:description" content="BBS+Blog项目开发 1.项目需求 基于ajax和用户认证组件实现登录验证 基于ajax和form组件实现注册功能 系统首页文章列表的渲染 个人站点页面设计 文章详细页的继承 点赞与踩灭 评论功能">
<link type="text/css" rel="stylesheet" href="./BBS+Blog项目开发_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./BBS+Blog项目开发_files/bundle-BlueSky.css">
<link type="text/css" rel="stylesheet" href="./BBS+Blog项目开发_files/420602.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./BBS+Blog项目开发_files/bundle-BlueSky-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/huang-yc/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/huang-yc/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/huang-yc/wlwmanifest.xml">
<script async="" src="./BBS+Blog项目开发_files/analytics.js"></script><script type="text/javascript" src="./BBS+Blog项目开发_files/encoder.js"></script><script src="./BBS+Blog项目开发_files/jquery-2.2.0.min.js"></script>
<script type="text/javascript">var currentBlogApp = 'huang-yc', cb_enable_mathjax=false;var isLogined=true;</script>
<script src="./BBS+Blog项目开发_files/blog-common.js" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/huang-yc/"><img id="blogLogo" src="./BBS+Blog项目开发_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/huang-yc/">Huang_Yc</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/huang-yc/">首页</a></li>
<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/Huang_Yc">联系</a></li>
<li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/huang-yc/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/huang-yc/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 41&nbsp; </span>
<span id="stats_article_count">文章 - 1&nbsp; </span>
<span id="stats-comment_count">评论 - 1</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/huang-yc/p/9630644.html">BBS+Blog项目开发</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><a name="_labelTop"></a><div id="navCategory" style="color:#152e97;"><p style="font-size:18px;"><b>目录</b></p><ul><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label0">1.项目需求</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1">2.项目详情</a><ul><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_0">2.1 数据库设计</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_1">2.2 站点管理</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_2">2.3 注册</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_3">2.4 登录</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_4">2.5 网站首页</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_5">2.6 个人站点</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_6">2.7 文章详情</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_7">&nbsp;2.8 后台管理</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label1_8">2.9 批量建立测试数据</a></li></ul></li><li><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_label2">3.源码链接：&nbsp;</a></li></ul></div><p>&nbsp;</p><hr style="height:1px;border:none;border-top:1px dashed #0066CC;"><h1 class="md-end-block md-heading md-focus"><span class="md-expand">BBS+Blog项目开发</span></h1>
<div style="text-align: right;"><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_labelTop" style="color:#f68a33">回到顶部</a><a name="_label0"></a></div><h2 class="md-end-block md-heading"><span>1.项目需求</span></h2>
<ul>
<li><span style="font-size: 18px;">基于ajax和用户认证组件实现登录验证</span></li>
<li><span style="font-size: 18px;">基于ajax和form组件实现注册功能</span></li>
<li><span style="font-size: 18px;">系统首页文章列表的渲染</span></li>
<li><span style="font-size: 18px;">个人站点页面设计</span></li>
<li><span style="font-size: 18px;">文章详细页的继承</span></li>
<li><span style="font-size: 18px;">点赞与踩灭</span></li>
<li><span style="font-size: 18px;">评论功能</span></li>
<li><span style="font-size: 18px;">富文本编辑器的使用</span></li>
<li><span style="font-size: 18px;">防止xss攻击</span></li>
</ul>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="https://images2018.cnblogs.com/blog/1356841/201808/1356841-20180830154316945-1613552450.png"><img src="./BBS+Blog项目开发_files/1356841-20180830154316945-1613552450.png" alt=""></span></p>
<div style="text-align: right;"><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_labelTop" style="color:#f68a33">回到顶部</a><a name="_label1"></a></div><h2 class="md-end-block md-heading"><span>2.项目详情</span></h2>
<a name="_label1_0"></a><h3 class="md-end-block md-heading"><span>2.1 数据库设计</span></h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code">
<pre>1<span style="color: #000000;">.继承AbstractUser
</span>2<span style="color: #000000;">.中介模型
</span>3.联合唯一</pre>
</div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span><span><br><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span></span></span></pre>
<p class="md-end-block">&nbsp;</p>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="https://images2018.cnblogs.com/blog/1356841/201808/1356841-20180830154447123-1865221472.png"><img src="./BBS+Blog项目开发_files/1356841-20180830154447123-1865221472.png" alt=""></span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;ce025303-1cbc-44ff-bfaa-d8f4657def33&#39;)"><img id="code_img_closed_ce025303-1cbc-44ff-bfaa-d8f4657def33" class="code_img_closed" src="./BBS+Blog项目开发_files/ContractedBlock.gif" alt=""><img id="code_img_opened_ce025303-1cbc-44ff-bfaa-d8f4657def33" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;ce025303-1cbc-44ff-bfaa-d8f4657def33&#39;,event)" src="./BBS+Blog项目开发_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_ce025303-1cbc-44ff-bfaa-d8f4657def33" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">from</span> django.db <span style="color: #0000ff;">import</span><span style="color: #000000;"> models
​
</span><span style="color: #008000;">#</span><span style="color: #008000;"> Create your models here.</span>
<span style="color: #000000;">​
​
</span><span style="color: #0000ff;">from</span> django.contrib.auth.models <span style="color: #0000ff;">import</span><span style="color: #000000;"> AbstractUser
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> UserInfo(AbstractUser):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">
    用户信息
    </span><span style="color: #800000;">"""</span><span style="color: #000000;">
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    telephone </span>= models.CharField(max_length=11, null=True, unique=<span style="color: #000000;">True)
    avatar </span>= models.FileField(upload_to=<span style="color: #800000;">'</span><span style="color: #800000;">avatars/</span><span style="color: #800000;">'</span>, default=<span style="color: #800000;">"</span><span style="color: #800000;">avatars/default.png</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    create_time </span>= models.DateTimeField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">创建时间</span><span style="color: #800000;">'</span>, auto_now_add=<span style="color: #000000;">True)
​
    blog </span>= models.OneToOneField(to=<span style="color: #800000;">'</span><span style="color: #800000;">Blog</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, null=True, on_delete=<span style="color: #000000;">models.CASCADE)
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.username
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Blog(models.Model):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">
    博客信息
    </span><span style="color: #800000;">"""</span><span style="color: #000000;">
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    title </span>= models.CharField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">个人博客标题</span><span style="color: #800000;">'</span>, max_length=64<span style="color: #000000;">)
    site_name </span>= models.CharField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">站点名称</span><span style="color: #800000;">'</span>, max_length=64<span style="color: #000000;">)
    theme </span>= models.CharField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">博客主题</span><span style="color: #800000;">'</span>, max_length=32<span style="color: #000000;">)
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.title
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Category(models.Model):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">
    博主个人文章分类表
    </span><span style="color: #800000;">"""</span><span style="color: #000000;">
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    title </span>= models.CharField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">分类标题</span><span style="color: #800000;">'</span>, max_length=32<span style="color: #000000;">)
    blog </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">所属博客</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">'</span><span style="color: #800000;">Blog</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.title
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Tag(models.Model):
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    title </span>= models.CharField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">标签名称</span><span style="color: #800000;">'</span>, max_length=32<span style="color: #000000;">)
    blog </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">所属博客</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">'</span><span style="color: #800000;">Blog</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.title
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Article(models.Model):
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    title </span>= models.CharField(max_length=50, verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">文章标题</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    desc </span>= models.CharField(max_length=255, verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">文章描述</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    create_time </span>= models.DateTimeField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">创建时间</span><span style="color: #800000;">'</span>, auto_now_add=<span style="color: #000000;">True)
    content </span>=<span style="color: #000000;"> models.TextField()
​
    comment_count </span>= models.IntegerField(default=<span style="color: #000000;">0)
    up_count </span>= models.IntegerField(default=<span style="color: #000000;">0)
    down_count </span>= models.IntegerField(default=<span style="color: #000000;">0)
​
    user </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">作者</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">'</span><span style="color: #800000;">UserInfo</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
    category </span>= models.ForeignKey(to=<span style="color: #800000;">'</span><span style="color: #800000;">Category</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, null=True, on_delete=<span style="color: #000000;">models.CASCADE)
    tags </span>=<span style="color: #000000;"> models.ManyToManyField(
        to</span>=<span style="color: #800000;">"</span><span style="color: #800000;">Tag</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        through</span>=<span style="color: #800000;">'</span><span style="color: #800000;">Article2Tag</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        through_fields</span>=(<span style="color: #800000;">'</span><span style="color: #800000;">article</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">tag</span><span style="color: #800000;">'</span><span style="color: #000000;">),
    )
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.title
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Article2Tag(models.Model):
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    article </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">文章</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">"</span><span style="color: #800000;">Article</span><span style="color: #800000;">"</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
    tag </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">标签</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">"</span><span style="color: #800000;">Tag</span><span style="color: #800000;">"</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
​
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Meta:
        unique_together </span>=<span style="color: #000000;"> [
            (</span><span style="color: #800000;">'</span><span style="color: #800000;">article</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">tag</span><span style="color: #800000;">'</span><span style="color: #000000;">),
        ]
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        v </span>= self.article.title + <span style="color: #800000;">"</span><span style="color: #800000;">---</span><span style="color: #800000;">"</span> +<span style="color: #000000;"> self.tag.title
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> v
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> ArticleUpDown(models.Model):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">
    点赞表
    </span><span style="color: #800000;">"""</span><span style="color: #000000;">
​
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    user </span>= models.ForeignKey(<span style="color: #800000;">'</span><span style="color: #800000;">UserInfo</span><span style="color: #800000;">'</span>, null=True, on_delete=<span style="color: #000000;">models.CASCADE)
    article </span>= models.ForeignKey(<span style="color: #800000;">"</span><span style="color: #800000;">Article</span><span style="color: #800000;">"</span>, null=True, on_delete=<span style="color: #000000;">models.CASCADE)
    is_up </span>= models.BooleanField(default=<span style="color: #000000;">True)
​
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Meta:
        unique_together </span>=<span style="color: #000000;"> [
            (</span><span style="color: #800000;">'</span><span style="color: #800000;">article</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span><span style="color: #000000;">),
        ]
​
​
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Comment(models.Model):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">
​
    评论表
​
    </span><span style="color: #800000;">"""</span><span style="color: #000000;">
    nid </span>= models.AutoField(primary_key=<span style="color: #000000;">True)
    article </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">评论文章</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">'</span><span style="color: #800000;">Article</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
    user </span>= models.ForeignKey(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">评论者</span><span style="color: #800000;">'</span>, to=<span style="color: #800000;">'</span><span style="color: #800000;">UserInfo</span><span style="color: #800000;">'</span>, to_field=<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>, on_delete=<span style="color: #000000;">models.CASCADE)
    content </span>= models.CharField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">评论内容</span><span style="color: #800000;">'</span>, max_length=255<span style="color: #000000;">)
    create_time </span>= models.DateTimeField(verbose_name=<span style="color: #800000;">'</span><span style="color: #800000;">创建时间</span><span style="color: #800000;">'</span>, auto_now_add=<span style="color: #000000;">True)
    parent_comment </span>= models.ForeignKey(<span style="color: #800000;">'</span><span style="color: #800000;">self</span><span style="color: #800000;">'</span>, null=True, on_delete=<span style="color: #000000;">models.CASCADE)
​
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.content
​</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<a name="_label1_1"></a><h3 class="md-end-block md-heading"><span>2.2 站点管理</span></h3>
<p><span>核心代码：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;320e370f-4d91-482a-b57b-3b4bc0e7f5c4&#39;)"><img id="code_img_closed_320e370f-4d91-482a-b57b-3b4bc0e7f5c4" class="code_img_closed" src="./BBS+Blog项目开发_files/ContractedBlock.gif" alt=""><img id="code_img_opened_320e370f-4d91-482a-b57b-3b4bc0e7f5c4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;320e370f-4d91-482a-b57b-3b4bc0e7f5c4&#39;,event)" src="./BBS+Blog项目开发_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_320e370f-4d91-482a-b57b-3b4bc0e7f5c4" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">from</span> django.contrib <span style="color: #0000ff;">import</span><span style="color: #000000;"> admin
​
</span><span style="color: #008000;">#</span><span style="color: #008000;"> Register your models here.</span>
<span style="color: #0000ff;">from</span> blog <span style="color: #0000ff;">import</span><span style="color: #000000;"> models
​
admin.site.register(models.UserInfo)
admin.site.register(models.Article)
admin.site.register(models.Article2Tag)
admin.site.register(models.ArticleUpDown)
admin.site.register(models.Blog)
admin.site.register(models.Category)
admin.site.register(models.Comment)
admin.site.register(models.Tag)</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span class="cm-keyword">&nbsp;</span></pre>
<a name="_label1_2"></a><h3 class="md-end-block md-heading"><span>2.3 注册</span></h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1<span style="color: #000000;">.form组件

</span>1<span style="color: #000000;">.form组件
    </span><span style="color: #0000ff;">class</span> RegForm(forms.Form):<span style="color: #0000ff;">pass</span><span style="color: #000000;">
    局部钩子 全局钩子
​
</span>2<span style="color: #000000;">.上传头像 avatar
    图像预览
        var reader </span>=<span style="color: #000000;"> new FileReader();
    上传文件
        formdata </span>=<span style="color: #000000;"> new FormData();
​
</span>3<span style="color: #000000;">.用户文件配置
    avatar </span>= models.FileField(upload_to=<span style="color: #800000;">'</span><span style="color: #800000;">avatars/</span><span style="color: #800000;">'</span>, default=<span style="color: #800000;">'</span><span style="color: #800000;">avatars/default.png</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    MEDIA_ROOT </span>= os.path.join(BASE_DIR, <span style="color: #800000;">'</span><span style="color: #800000;">blog</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">media</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    MEDIA_URL </span>= <span style="color: #800000;">'</span><span style="color: #800000;">/media/</span><span style="color: #800000;">'</span><span style="color: #000000;">
    re_path(r</span><span style="color: #800000;">'</span><span style="color: #800000;">media/(?P&lt;path&gt;.*)$</span><span style="color: #800000;">'</span>,serve,{<span style="color: #800000;">'</span><span style="color: #800000;">document_root</span><span style="color: #800000;">'</span>:settings.MEDIA_ROOT})</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-def"><span class="cm-variable"><span class="cm-property"><span class="cm-keyword"><span><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-number"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-string"><span class="cm-variable"><span class="cm-string"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span class="cm-string"><span class="cm-string"><span><span class="cm-variable"><span class="cm-string"><span><span class="cm-variable"><span class="cm-string"><span class="cm-variable"><span class="cm-string"><span class="cm-variable"><span class="cm-property"><br><span><span><img src="./BBS+Blog项目开发_files/1356841-20180911215202023-639451677.png" alt=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<p class="md-end-block">&nbsp;</p>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202756.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202756.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<a name="_label1_3"></a><h3 class="md-end-block md-heading"><span>2.4 登录</span></h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1<span style="color: #000000;">.验证码
    随机生成5个字符，0</span>-9 a-z A-<span style="color: #000000;">Z
​
    pip install pillow
    </span><span style="color: #0000ff;">from</span> PIL <span style="color: #0000ff;">import</span><span style="color: #000000;"> Image, ImageDraw, ImageFont
        image </span>=<span style="color: #000000;"> Image.new()
​
    在内存中生成图片直接返回
    </span><span style="color: #0000ff;">from</span> io <span style="color: #0000ff;">import</span><span style="color: #000000;"> BytesIO
        f </span>=<span style="color: #000000;"> BytesIO()
​
</span>2.request.session[<span style="color: #800000;">'</span><span style="color: #800000;">valid_str</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> valid_str
    存在session中，为了之后登录，验证是否通过
​
</span>3<span style="color: #000000;">.验证码点击刷新：
    $(</span><span style="color: #800000;">'</span><span style="color: #800000;">#valid_img</span><span style="color: #800000;">'</span><span style="color: #000000;">).click(function () {
        $(this)[0].src </span>+= <span style="color: #800000;">'</span><span style="color: #800000;">?</span><span style="color: #800000;">'</span><span style="color: #000000;">
    });
​
</span>4<span style="color: #000000;">.认证组件
    valid_str </span>= request.session.get(<span style="color: #800000;">'</span><span style="color: #800000;">valid_str</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    </span><span style="color: #0000ff;">if</span> valid_str.upper() ==<span style="color: #000000;"> valid_code.upper():
        user </span>= auth.authenticate(username = user, password =<span style="color: #000000;"> pwd)
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> user:
            auth.login(request, user)</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-operator"><span class="cm-number"><span class="cm-variable"><span class="cm-operator"><span class="cm-variable"><span class="cm-variable"><span class="cm-operator"><span class="cm-variable"><span><span><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span><span><span><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-number"><span class="cm-variable"><span class="cm-property"><span class="cm-string"><span class="cm-variable"><span><span class="cm-variable"><span><span><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-error"><span class="cm-string"><span class="cm-property"><span class="cm-variable"><span><span class="cm-error"><span class="cm-variable"><span class="cm-number"><span class="cm-property"><span class="cm-string"><span><span><span><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-property"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable">&nbsp;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span class="cm-keyword">&nbsp;</span></pre>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-operator"><span class="cm-number"><span class="cm-variable"><span class="cm-operator"><span class="cm-variable"><span class="cm-variable"><span class="cm-operator"><span class="cm-variable"><span><span><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span><span><span><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-number"><span class="cm-variable"><span class="cm-property"><span class="cm-string"><span class="cm-variable"><span><span class="cm-variable"><span><span><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-error"><span class="cm-string"><span class="cm-property"><span class="cm-variable"><span><span class="cm-error"><span class="cm-variable"><span class="cm-number"><span class="cm-property"><span class="cm-string"><span><span><span><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-property"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><img src="./BBS+Blog项目开发_files/1356841-20180911215140660-111765331.png" alt=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202704.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202704.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<a name="_label1_4"></a><h3 class="md-end-block md-heading"><span>2.5 网站首页</span></h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1<span style="color: #000000;">.bootstrap搭建页面
​
</span>2<span style="color: #000000;">.导航条
    登录：   username </span>/<span style="color: #000000;"> 注销
    未登录： 登录 </span>/<span style="color: #000000;"> 注册
​
</span>3<span style="color: #000000;">.for循环
     {</span>% <span style="color: #0000ff;">for</span> article <span style="color: #0000ff;">in</span> article_list %<span style="color: #000000;">}
     {</span>% endfor %}</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span><span><span><span><span><span><span><span><span><span><img src="./BBS+Blog项目开发_files/1356841-20180911215236923-1894987618.png" alt=""><br></span></span></span></span></span></span></span></span></span></span></span></pre>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911191043.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911191043.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<p class="md-end-block"><span>网页底部分页器：</span></p>
<p class="md-end-block"><span><img src="./BBS+Blog项目开发_files/1356841-20180911215251033-1672110239.png" alt=""></span></p>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911200719.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911200719.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<a name="_label1_5"></a><h3 class="md-end-block md-heading"><span>2.6 个人站点</span></h3>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1<span style="color: #000000;">.文章列表，分类列表，标签列表，日期归档列表
    文章列表：     </span>/blog/egon/<span style="color: #000000;">
    分类列表：     </span>/blog/egon/cate/<span style="color: #000000;">python
    标签列表：     </span>/blog/egon/tag/<span style="color: #000000;">生活
    日期归档列表： </span>/blog/egon/archive/2018-06<span style="color: #000000;">
​
</span>2<span style="color: #000000;">.模板继承
    {</span>% extends <span style="color: #800000;">'</span><span style="color: #800000;">base.html</span><span style="color: #800000;">'</span> %<span style="color: #000000;">}
​
    {</span>% block content %<span style="color: #000000;">}
    {</span>% endblock content%<span style="color: #000000;">}}
​
</span>3<span style="color: #000000;">.自定义标签
    </span>/blog/templatetags/<span style="color: #000000;">my_tag.py
​
    @register.inclusion_tag(</span><span style="color: #800000;">'</span><span style="color: #800000;">menu.html</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_menu(username):
        ...
        </span><span style="color: #0000ff;">return</span> {} <span style="color: #008000;">#</span><span style="color: #008000;"> 去渲染 menu.html</span>
<span style="color: #000000;">​
</span>4.分组查询 .annotate() /<span style="color: #000000;"> extra()应用
    多表分组
        tag_list </span>= Tag.objects.filter(blog=<span style="color: #000000;">blog).annotate(
            count </span>= Count(<span style="color: #800000;">'</span><span style="color: #800000;">article</span><span style="color: #800000;">'</span>)).values_list(<span style="color: #800000;">'</span><span style="color: #800000;">title</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">count</span><span style="color: #800000;">'</span><span style="color: #000000;">)
​
    单表分组 </span>/ DATE_FORMAT() /<span style="color: #000000;">  extra()
        date_list </span>= Article.objects.filter(user=<span style="color: #000000;">user).extra(
            select</span>={<span style="color: #800000;">"</span><span style="color: #800000;">create_ym</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">DATE_FORMAT(create_time,'%%Y-%%m')</span><span style="color: #800000;">"</span>}).values(<span style="color: #800000;">'</span><span style="color: #800000;">create_ym</span><span style="color: #800000;">'</span><span style="color: #000000;">).annotate(
            c </span>= Count(<span style="color: #800000;">'</span><span style="color: #800000;">nid</span><span style="color: #800000;">'</span>)).values_list(<span style="color: #800000;">'</span><span style="color: #800000;">create_ym</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span><span style="color: #000000;">)
​
</span>5<span style="color: #000000;">. 时间、区域配置
     TIME_ZONE </span>= <span style="color: #800000;">'</span><span style="color: #800000;">Asia/Shanghai</span><span style="color: #800000;">'</span><span style="color: #000000;">
     USE_TZ </span>= False</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><br><img src="./BBS+Blog项目开发_files/1356841-20180911215310812-577258899.png" alt=""><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911201734.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911201734.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<a name="_label1_6"></a><h3 class="md-end-block md-heading"><span>2.7 文章详情</span></h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1<span style="color: #000000;">.模板继承
    article </span>= Article.objects.filter(pk=<span style="color: #000000;">article_id).first()
    {</span>% extends <span style="color: #800000;">'</span><span style="color: #800000;">base.html</span><span style="color: #800000;">'</span> %<span style="color: #000000;">}
    {</span>% block content %<span style="color: #000000;">}
         ...
        {{ article.articledetail.content</span>|<span style="color: #000000;">safe }}
    {</span>% endblock content %}</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span><span><span><span><span><span><br><img src="./BBS+Blog项目开发_files/1356841-20180911215337094-341474826.png" alt=""><br></span></span></span></span></span></span></span></pre>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202104.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202104.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202114.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202114.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<a name="_label1_7"></a><h3 class="md-end-block md-heading">&nbsp;2.8 后台管理</h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1<span style="color: #000000;">.支持文章编辑
</span>2<span style="color: #000000;">.支持富文本编辑器（支持渲染已有文章）
</span>3<span style="color: #000000;">.支持删除文章
</span>4<span style="color: #000000;">.防止Xss攻击（基于BS4）
 </span><span style="color: #008000;">#</span><span style="color: #008000;"> 防止xss攻击,过滤script标签</span>
        soup = BeautifulSoup(content, <span style="color: #800000;">"</span><span style="color: #800000;">html.parser</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span> tag <span style="color: #0000ff;">in</span><span style="color: #000000;"> soup.find_all():
​
            </span><span style="color: #0000ff;">if</span> tag.name == <span style="color: #800000;">"</span><span style="color: #800000;">script</span><span style="color: #800000;">"</span><span style="color: #000000;">:
                tag.decompose()</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./BBS+Blog项目开发_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<p class="md-end-block">&nbsp;<img src="./BBS+Blog项目开发_files/1356841-20180911215442402-358164894.png" alt=""></p>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202249.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911202249.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<p class="md-end-block"><span class="md-image md-img-loaded" data-src="/home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911213437.png"><img src="file:///home/hyc/Desktop/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180911213437.png?lastModify=1536673308" alt="" data-local-refresh="true"></span></p>
<a name="_label1_8"></a><h3 class="md-end-block md-heading"><span>2.9 批量建立测试数据</span></h3>
<p class="md-end-block"><span>核心代码：</span></p>
<div class="cnblogs_code">
<pre>1<span style="color: #000000;">.定制建立测试数据
</span>2.初始化得到100条用户信息，以及为100个客户分别添加文章、博客的详细信息</pre>
</div>
<p>&nbsp;</p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-number"><span class="cm-variable">&nbsp;</span></span></span></span></span></span></pre>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;97d1fd46-49eb-4866-96d4-cd50c7a04c5d&#39;)"><img id="code_img_closed_97d1fd46-49eb-4866-96d4-cd50c7a04c5d" class="code_img_closed" src="./BBS+Blog项目开发_files/ContractedBlock.gif" alt=""><img id="code_img_opened_97d1fd46-49eb-4866-96d4-cd50c7a04c5d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;97d1fd46-49eb-4866-96d4-cd50c7a04c5d&#39;,event)" src="./BBS+Blog项目开发_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_97d1fd46-49eb-4866-96d4-cd50c7a04c5d" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">def</span><span style="color: #000000;"> supreme(request):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">
    这是数据初始化视图，将会生成99条测试数据，用户名为管理员输入的字符后，加1_99.
    密码为管理员填入的密码
    :param request:
    :return:
    </span><span style="color: #800000;">"""</span><span style="color: #000000;">
    tag_title </span>= [<span style="color: #800000;">'</span><span style="color: #800000;">BASIC</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                 </span><span style="color: #800000;">'</span><span style="color: #800000;">C++</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">PASCAL</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">FORTRAN</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">LISP</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Prolog</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">CLIPS</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">OpenCyc</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Fazzy</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Python</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">PHP</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Ruby</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                 </span><span style="color: #800000;">'</span><span style="color: #800000;">Lua</span><span style="color: #800000;">'</span><span style="color: #000000;">]
    category_titles </span>= [<span style="color: #800000;">'</span><span style="color: #800000;">非技术区</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">软件测试</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">代码与软件发布</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">计算机图形学</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">游戏开发</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">程序人生</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">求职面试</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">读书区</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">转载区</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">Windows</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">翻译区</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">开源研究</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                       </span><span style="color: #800000;">'</span><span style="color: #800000;">Flex</span><span style="color: #800000;">'</span><span style="color: #000000;">]
    userlist </span>=<span style="color: #000000;"> []
    bolglist </span>=<span style="color: #000000;"> []
    article_list </span>=<span style="color: #000000;"> []
    tag_list </span>=<span style="color: #000000;"> []
    cat_list </span>=<span style="color: #000000;"> []
    article2tag_list </span>=<span style="color: #000000;"> []
​
    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> request.is_ajax():
​
        form </span>=<span style="color: #000000;"> UserForm(request.POST)
        response </span>= {<span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span>: None, <span style="color: #800000;">'</span><span style="color: #800000;">msg</span><span style="color: #800000;">'</span><span style="color: #000000;">: None}
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> form.is_valid():
​
            response[</span><span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span>] = form.cleaned_data.get(<span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span><span style="color: #000000;">)
            </span><span style="color: #008000;">#</span><span style="color: #008000;"> 生成一条用户记录</span>
            user = form.cleaned_data.get(<span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span><span style="color: #000000;">)
​
            pwd </span>= form.cleaned_data.get(<span style="color: #800000;">'</span><span style="color: #800000;">pwd</span><span style="color: #800000;">'</span><span style="color: #000000;">)
            email </span>= form.cleaned_data.get(<span style="color: #800000;">'</span><span style="color: #800000;">email</span><span style="color: #800000;">'</span><span style="color: #000000;">)
            avatar_obj </span>= request.FILES.get(<span style="color: #800000;">'</span><span style="color: #800000;">avatar</span><span style="color: #800000;">'</span><span style="color: #000000;">)
            extra </span>=<span style="color: #000000;"> {}
            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> avatar_obj:
                extra[</span><span style="color: #800000;">'</span><span style="color: #800000;">avatar</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> avatar_obj
                with transaction.atomic():
                    </span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> range(1, 100<span style="color: #000000;">):
                        Blog.objects.create(title</span>=<span style="color: #800000;">'</span><span style="color: #800000;">blog%s</span><span style="color: #800000;">'</span> %<span style="color: #000000;"> i)
​
                        UserInfo.objects.create_user(username</span>=user + str(i), password=pwd, email=email, **<span style="color: #000000;">extra)
​
                        UserInfo.objects.filter(username</span>=user + str(i)).update(blog_id=<span style="color: #000000;">i)
​
                        </span><span style="color: #0000ff;">for</span> title <span style="color: #0000ff;">in</span><span style="color: #000000;"> tag_title:
                            tag_list.append(Tag(title</span>=title, blog_id=<span style="color: #000000;">i))
​
                        </span><span style="color: #0000ff;">for</span> cat <span style="color: #0000ff;">in</span><span style="color: #000000;"> category_titles:
                            cat_list.append(Category(title</span>=cat, blog_id=<span style="color: #000000;">i))
                        </span><span style="color: #0000ff;">import</span><span style="color: #000000;"> random
                        </span><span style="color: #0000ff;">for</span> c <span style="color: #0000ff;">in</span> range(1, 7<span style="color: #000000;">):
                            with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">/home/hyc/PycharmProjects/cnblog/static/superme/%s.txt</span><span style="color: #800000;">'</span> % c, <span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                                      encoding</span>=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
                                content </span>=<span style="color: #000000;"> f.read()
​
                            soup </span>= BeautifulSoup(content, <span style="color: #800000;">"</span><span style="color: #800000;">html.parser</span><span style="color: #800000;">"</span><span style="color: #000000;">)
                            </span><span style="color: #0000ff;">for</span> tag <span style="color: #0000ff;">in</span><span style="color: #000000;"> soup.find_all():
                                </span><span style="color: #0000ff;">if</span> tag.name == <span style="color: #800000;">"</span><span style="color: #800000;">script</span><span style="color: #800000;">"</span><span style="color: #000000;">:
                                    tag.decompose()
                            desc </span>= soup.text[0:150] + <span style="color: #800000;">"</span><span style="color: #800000;">...</span><span style="color: #800000;">"</span><span style="color: #000000;">
                            c_id </span>= 13 * (i - 1) + random.randrange(1, 9<span style="color: #000000;">)
​
                            article_list.append(
                                Article(desc</span>=desc, title=<span style="color: #800000;">'</span><span style="color: #800000;">article%s</span><span style="color: #800000;">'</span> % c, content=content, user_id=i, category_id=<span style="color: #000000;">c_id))
​
                    Category.objects.bulk_create(cat_list)
                    Tag.objects.bulk_create(tag_list)
                    Article.objects.bulk_create(article_list)
​
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
            response[</span><span style="color: #800000;">'</span><span style="color: #800000;">msg</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> form.errors
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> JsonResponse(response)
​
    my_from </span>=<span style="color: #000000;"> UserForm
​
    </span><span style="color: #0000ff;">return</span> render(request, <span style="color: #800000;">'</span><span style="color: #800000;">supreme.html</span><span style="color: #800000;">'</span>, {<span style="color: #800000;">'</span><span style="color: #800000;">from</span><span style="color: #800000;">'</span>: my_from})</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p><img src="./BBS+Blog项目开发_files/1356841-20180911215522692-421655458.png" alt=""></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-number"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-def"><span class="cm-variable"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-variable"><span class="cm-string"><span class="cm-string"><span><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span class="cm-string"><span><span class="cm-string"><span><span class="cm-variable"><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-string"><span><span class="cm-variable"><span><span class="cm-variable"><span><span class="cm-variable"><span><span class="cm-variable"><span><span class="cm-variable"><span><span class="cm-variable"><span><span><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span><span><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span><span class="cm-variable"><span class="cm-string"><span class="cm-keyword"><span class="cm-string"><span class="cm-keyword"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span><span><span><span class="cm-variable"><span class="cm-string"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span class="cm-comment"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-string"><span><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-string"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-builtin"><span class="cm-number"><span class="cm-number"><span><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span class="cm-string"><span class="cm-operator"><span class="cm-variable"><span><span><span><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span class="cm-operator"><span class="cm-builtin"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-operator"><span class="cm-variable"><span><span><span><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span class="cm-operator"><span class="cm-builtin"><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-property"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-builtin"><span class="cm-number"><span class="cm-number"><span><span class="cm-keyword"><span class="cm-builtin"><span class="cm-string"><span class="cm-operator"><span class="cm-variable"><span class="cm-string"><span><span class="cm-variable"><span class="cm-string"><span class="cm-keyword"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span><span><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-string"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-property"><span class="cm-string"><span><span class="cm-variable"><span class="cm-property"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-property"><span class="cm-number"><span class="cm-number"><span class="cm-operator"><span class="cm-string"><span><span class="cm-variable"><span class="cm-number"><span class="cm-operator"><span class="cm-variable"><span class="cm-operator"><span class="cm-number"><span class="cm-operator"><span class="cm-variable"><span class="cm-property"><span class="cm-number"><span class="cm-number"><span><span><span><span class="cm-variable"><span class="cm-property"><span><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-string"><span class="cm-operator"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span><span class="cm-variable"><span class="cm-property"><span class="cm-property"><span class="cm-variable"><span><span><span><span class="cm-keyword"><span><span class="cm-variable"><span class="cm-string"><span class="cm-variable"><span class="cm-property"><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-variable"><span class="cm-variable"><span><span><span><span class="cm-keyword"><span class="cm-variable"><span class="cm-variable"><span class="cm-string"><span class="cm-string"><span class="cm-variable"><br><span><span>​</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<div style="text-align: right;"><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#_labelTop" style="color:#f68a33">回到顶部</a><a name="_label2"></a></div><h2 class="md-end-block">3.源码链接：&nbsp;</h2>
<p><a title="我的github" href="https://github.com/hyyc554/BBS" target="_blank">https://github.com/hyyc554/BBS</a></p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag">标签: <a href="https://www.cnblogs.com/huang-yc/tag/django/">django</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(9630644,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;3524b58e-fdad-442d-c1d7-08d58662b770&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./BBS+Blog项目开发_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./BBS+Blog项目开发_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/huang-yc/" target="_blank"><img src="./BBS+Blog项目开发_files/20180411175016.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/huang-yc/">Huang_Yc</a><br>
            <a href="http://home.cnblogs.com/u/huang-yc/followees">关注 - 8</a><br>
            <a href="http://home.cnblogs.com/u/huang-yc/followers">粉丝 - 4</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(9630644,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(9630644,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/huang-yc/p/9610152.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/huang-yc/p/9610152.html" title="发布于2018-09-08 19:29">django——文本编辑器</a><br><a href="https://www.cnblogs.com/huang-yc/p/9646546.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/huang-yc/p/9646546.html" title="发布于2018-09-14 14:46">django——面试题(仍在更新中)</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2018-09-11 21:58</span> <a href="https://www.cnblogs.com/huang-yc/">Huang_Yc</a> 阅读(<span id="post_view_count">28</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=9630644" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/huang-yc/p/9630644.html#" onclick="AddToWz(9630644);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=420602,cb_entryId=9630644,cb_blogApp=currentBlogApp,cb_blogUserGuid='3524b58e-fdad-442d-c1d7-08d58662b770',cb_entryCreatedDate='2018/9/11 21:58:00';loadViewCount(cb_entryId);var cb_postType=1;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/huang-yc/p/9630644.html#top">返回顶部</a></div>
<div id="comment_form_container"><script type="text/javascript" src="./BBS+Blog项目开发_files/mention.js"></script>
<div id="commentform_title">发表评论</div>
<span id="tip_comment" style="color:Red"></span>
<p>
昵称：<input type="text" id="tbCommentAuthor" class="author" disabled="disabled" size="50" value="Huang_Yc">
</p>
<div class="commentbox_main">
<div class="commentbox_title">
<div class="commentbox_title_left">评论内容：</div>
<div class="commentbox_title_right">
<img id="ubb_quote" class="comment_icon" src="./BBS+Blog项目开发_files/quote.gif" alt="引用" title="添加引用" onclick="insertUBB(&#39;tbCommentBody&#39;,&#39;quote&#39;)">
<img id="ubb_bold" class="comment_icon" src="./BBS+Blog项目开发_files/b.png" alt="粗体" title="添加粗体" onclick="insertUBB(&#39;tbCommentBody&#39;,&#39;b&#39;)">
<img id="ubb_url" class="comment_icon" src="./BBS+Blog项目开发_files/lk.png" alt="链接" title="添加链接" onclick="insertUbbUrl(&#39;tbCommentBody&#39;)">
<img id="ubb_indent" class="comment_icon" src="./BBS+Blog项目开发_files/indent.png" alt="缩进" title="添加首行缩进" onclick="insertIndent(&#39;tbCommentBody&#39;)">
<img id="ubb_code" class="comment_icon" src="./BBS+Blog项目开发_files/InsertCode.gif" alt="代码" title="添加代码" onclick="insertUbbCode()">
<img id="ubb_img" class="comment_icon" src="./BBS+Blog项目开发_files/img.gif" alt="图片" title="上传图片" onclick="OpenImageUploadWindow();">
</div>
</div>
<div class="clear"></div>
<textarea id="tbCommentBody" class="comment_textarea"></textarea>
</div>
<p id="commentbox_opt">
<input id="btn_comment_submit" type="button" class="comment_btn" value="提交评论">
<span id="span_comment_canceledit" style="display:none"><a href="javascript:void(0);" onclick="return CancelCommentEdit()">不改了</a></span>
<a href="javascript:void(0);" onclick="return logout();">退出</a>
</p>
<div id="tip_comment2" style="color:Red"></div>
<p>
[Ctrl+Enter快捷键提交]
</p>
<div style="display:none">
<span id="comment_edit_id"></span><span id="span_parentcomment_id"></span>
<span id="span_parent_id"></span>
<span id="span_comment_replyto"></span>
<span id="span_comment_posted"></span>
</div>
</div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="https://news.cnblogs.com/n/607394/" target="_blank">井贤栋：支付宝增2亿年活 蚂蚁海外9地落地支付</a><br> ·  <a href="https://news.cnblogs.com/n/607397/" target="_blank">一年过去了，25万月薪的AI工程师还存在吗？</a><br> ·  <a href="https://news.cnblogs.com/n/607395/" target="_blank">腾讯周一再回购11.8万股 耗资3785.9万港元</a><br> ·  <a href="https://news.cnblogs.com/n/607351/" target="_blank">网易云盾回应极验：从未拿过内部文档 验证码产品不存在抄袭</a><br> ·  <a href="https://news.cnblogs.com/n/607390/" target="_blank">iPhone XS/XS Max苹果官网发货再次推迟：2-3周</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="cnblogs_c2" class="c_ad_block"></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="https://kb.cnblogs.com/page/606682/" target="_blank">为什么说 Java 程序员必须掌握 Spring Boot ？</a><br> ·  <a href="https://kb.cnblogs.com/page/606645/" target="_blank">在学习中，有一个比掌握知识更重要的能力</a><br> ·  <a href="https://kb.cnblogs.com/page/603663/" target="_blank">如何招到一个靠谱的程序员</a><br> ·  <a href="https://kb.cnblogs.com/page/573614/" target="_blank">一个故事看懂“区块链”</a><br> ·  <a href="https://kb.cnblogs.com/page/603697/" target="_blank">被踢出去的用户</a><br></div>» <a href="https://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/huang-yc/">Huang_Yc</a><br>园龄：<a href="https://home.cnblogs.com/u/huang-yc/" title="入园时间：2018-03-20">5个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/huang-yc/followers/">4</a><br>关注：<a href="https://home.cnblogs.com/u/huang-yc/followees/">8</a><div id="p_b_follow"></div><script>getFollowStatus('3524b58e-fdad-442d-c1d7-08d58662b770')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/08/01&#39;);return false;">&lt;</a></td><td align="center">2018年9月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/10/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">26</td><td class="CalOtherMonthDay" align="center">27</td><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td class="CalWeekendDay" align="center">1</td></tr><tr><td class="CalWeekendDay" align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td class="CalWeekendDay" align="center"><a href="https://www.cnblogs.com/huang-yc/archive/2018/09/08.html"><u>8</u></a></td></tr><tr><td class="CalWeekendDay" align="center">9</td><td align="center">10</td><td align="center"><a href="https://www.cnblogs.com/huang-yc/archive/2018/09/11.html"><u>11</u></a></td><td align="center">12</td><td align="center">13</td><td align="center"><a href="https://www.cnblogs.com/huang-yc/archive/2018/09/14.html"><u>14</u></a></td><td class="CalWeekendDay" align="center"><a href="https://www.cnblogs.com/huang-yc/archive/2018/09/15.html"><u>15</u></a></td></tr><tr><td class="CalWeekendDay" align="center"><a href="https://www.cnblogs.com/huang-yc/archive/2018/09/16.html"><u>16</u></a></td><td class="CalTodayDay" align="center">17</td><td align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td class="CalWeekendDay" align="center">22</td></tr><tr><td class="CalWeekendDay" align="center">23</td><td align="center">24</td><td align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td class="CalWeekendDay" align="center">29</td></tr><tr><td class="CalWeekendDay" align="center">30</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<div class="catListLink">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="https://www.cnblogs.com/huang-yc/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="https://www.cnblogs.com/huang-yc/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="https://www.cnblogs.com/huang-yc/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="https://www.cnblogs.com/huang-yc/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="https://www.cnblogs.com/huang-yc/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div></div><div id="sidebar_toptags" class="sidebar-block">
<div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
<li><a href="https://www.cnblogs.com/huang-yc/tag/django/">django</a>(17)</li><li><a href="https://www.cnblogs.com/huang-yc/tag/python/">python</a>(8)</li><li><a href="https://www.cnblogs.com/huang-yc/tag/mysql/">mysql</a>(3)</li><li><a href="https://www.cnblogs.com/huang-yc/tag/practice/">practice</a>(2)</li><li><a href="https://www.cnblogs.com/huang-yc/tag/python_study/">python_study</a>(2)</li><li><a href="https://www.cnblogs.com/huang-yc/tag/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/">生活感悟</a>(1)</li><li><a href="https://www.cnblogs.com/huang-yc/tag/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/">思维导图</a>(1)</li>
</ul>
</div></div><div id="sidebar_categories">
<div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
<h3 class="catListTitle">随笔档案</h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/huang-yc/archive/2018/09.html">2018年9月 (12)</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="https://www.cnblogs.com/huang-yc/archive/2018/08.html">2018年8月 (7)</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="https://www.cnblogs.com/huang-yc/archive/2018/07.html">2018年7月 (2)</a> </li>

<li><a id="CatList_LinkList_0_Link_3" href="https://www.cnblogs.com/huang-yc/archive/2018/06.html">2018年6月 (4)</a> </li>

<li><a id="CatList_LinkList_0_Link_4" href="https://www.cnblogs.com/huang-yc/archive/2018/05.html">2018年5月 (13)</a> </li>

<li><a id="CatList_LinkList_0_Link_5" href="https://www.cnblogs.com/huang-yc/archive/2018/04.html">2018年4月 (3)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/huang-yc/p/8797113.html#3949013">1. Re:登陆认证程序</a></li>
        <li class="recent_comment_body">Anyhow, this will be a good start!</li>
        <li class="recent_comment_author">--Huang_Yc</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/huang-yc/p/9012822.html">1. python面向对象编程练习(608)</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9294044.html">2. python生成指定文件夹目录树(138)</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/8988157.html">3. 类的多态性(112)</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/9191906.html">4. mysql练习题(98)</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/8982817.html">5. 面向对象程序设计——基础概念(52)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"><ul><li><a href="https://www.cnblogs.com/huang-yc/p/8797113.html">1. 登陆认证程序(1)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"><ul><li><a href="https://www.cnblogs.com/huang-yc/p/8798782.html">1. 三级菜单(1)</a></li><li><a href="https://www.cnblogs.com/huang-yc/p/8810676.html">2. 修改个人信息的程序(1)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2018 Huang_Yc
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<script language="javascript" type="text/javascript">
// 生成目录索引列表
// ref: http://www.cnblogs.com/wangqiguo/p/4355032.html
// modified by: zzq
function GenerateContentList()
{
    var mainContent = $('#cnblogs_post_body');
    var h2_list = $('#cnblogs_post_body h2');//如果你的章节标题不是h2,只需要将这里的h2换掉即可

    if(mainContent.length < 1)
        return;
 
    if(h2_list.length>0)
    {
        var content = '<a name="_labelTop"></a>';
        content += '<div id="navCategory" style="color:#152e97;">';
        content += '<p style="font-size:18px;"><b>目录</b></p>';
        content += '<ul>';
        for(var i=0; i<h2_list.length; i++)
        {
            var go_to_top = '<div style="text-align: right;"><a href="#_labelTop" style="color:#f68a33">回到顶部</a><a name="_label' + i + '"></a></div>';
            $(h2_list[i]).before(go_to_top);
            
            var h3_list = $(h2_list[i]).nextAll("h3");
            var li3_content = '';
            for(var j=0; j<h3_list.length; j++)
            {
                var tmp = $(h3_list[j]).prevAll('h2').first();
                if(!tmp.is(h2_list[i]))
                    break;
                var li3_anchor = '<a name="_label' + i + '_' + j + '"></a>';
                $(h3_list[j]).before(li3_anchor);
                li3_content += '<li><a href="#_label' + i + '_' + j + '">' + $(h3_list[j]).text() + '</a></li>';
            }
            
            var li2_content = '';
            if(li3_content.length > 0)
                li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a><ul>' + li3_content + '</ul></li>';
            else
                li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a></li>';
            content += li2_content;
        }
        content += '</ul>';
        content += '</div><p>&nbsp;</p>';
        content += '<hr style="height:1px;border:none;border-top:1px dashed #0066CC;"/>';
        if($('#cnblogs_post_body').length != 0 )
        {
            $($('#cnblogs_post_body')[0]).prepend(content);
        }
    }   
}

GenerateContentList();
</script>
<!--PageEndHtml Block End-->


</body></html>